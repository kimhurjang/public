<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragment/layout}">
<body>
<th:block layout:fragment="css">
    <link rel="stylesheet" href="/css/login.css">
    <!-- SweetAlert2 CSS (선택 사항) -->
    <link href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css" rel="stylesheet">
</th:block>

<section layout:fragment="content" id="container" class="sub login-page">
    <div class="login-container">
        <div class="login_box">
            <h1>회원 로그인</h1>

            <!-- 로그인 폼 시작 -->
            <form th:action="@{/api/member/loginProc}" method="POST">
                <div class="input_group">
                    <label for="userid">아이디</label>
                    <input type="text" id="userid" name="userid" placeholder="아이디" required>
                </div>
                <div class="input_group">
                    <label for="pwd">비밀번호</label>
                    <input type="password" id="pwd" name="pwd" placeholder="비밀번호" required>
                </div>
                <button type="submit" class="login_button">로그인</button>
            </form>

            <div class="links">
                <a href="/api/member/findidpw#tab1">아이디 찾기</a> |
                <a href="/api/member/findidpw#tab2">비밀번호 찾기</a> |
                <a href="/api/member/join">회원가입</a>
            </div>

            <div class="sns-icons">
                <a href="https://kauth.kakao.com/oauth/authorize?client_id=3a729b684852129622871e6b959a97e6&redirect_uri=http://localhost:8090/api/member/kakao&response_type=code">
                    카카오로 로그인
                </a>
            </div>
        </div>
    </div>
</section>

<!-- SweetAlert2 JS -->
<!-- SweetAlert2 JS -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script th:if="${errorCode == 'STOP'}">
    Swal.fire({
        icon: 'error',
        title: '접근 제한',
        text: '정지된 회원입니다. 관리자에게 문의하세요.'
    });
</script>

<script th:if="${errorCode == 'WITHDRAW'}">
    Swal.fire({
        icon: 'info',
        title: '회원 탈퇴',
        text: '탈퇴된 회원입니다. 회원가입 페이지로 이동합니다.'
    }).then(() => {
        window.location.href = '/api/member/join';
    });
</script>

<script th:if="${errorCode == 'BAD_CREDENTIALS'}">
    Swal.fire({
        icon: 'error',
        title: '로그인 실패',
        text: '아이디 또는 비밀번호가 올바르지 않습니다.'
    });
</script>



</body>
</html>
